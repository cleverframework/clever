extends ../../../system/views/admin/layout/admin

block content
  h1.page-header
    | Users: 
    span(style="color: #666") List
    div.row.placeholders
  
  table.table.table-hover
    thead
      tr
        th
          | Firstname
        th
          | Lastname
        th
          | Email
        th
          | Roles
        th
          | Provider
        th
          | 
    tbody
      each user in users
        tr
          td
            a(href="/admin/users/#{user._id}")
              | #{user.firstName}
          td
            | #{user.lastName}
          td
            | #{user.email}
          td
            each role, index in user.roles
              if index > 0
                | , 
              | #{role}
          td
            | #{user.provider}
          td
            .btn-group
                button.btn.btn-info.dropdown-toggle(type='button', data-toggle='dropdown', aria-expanded='false')
                  | Modify 
                  span.caret
                |   
                ul.dropdown-menu(role='menu')
                  li
                    a(href='/admin/users/#{user._id}/edit') Edit
                  |     
                  li
                    a.deleteUser(href='#', data-id="#{user._id}") Delete

    tfoot
      tr
        th
          | Firstname
        th
          | Lastname
        th
          | Email
        th
          | Roles
        th
          | Provider
        th 
          | 
  
  a(href="/admin/users/create").btn.btn-primary Create

block appendjs
  script.
    window.csrf = '#{csrfToken}';
  script(src="/public/users/admin/index.js")
